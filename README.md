# Проект “Сайт рецептов”

## Описание

Проект "Сайт рецептов" (recipe_website) представляет собой веб-приложение, разработанное с использованием
технологий фреймворков Django, FastAPI и Bootstrap. Это приложение предоставляет возможность пользователям добавлять
свои рецепты блюд, управлять ими и просматривать рецепты других пользователей.

Проект включает реализацию:
- личного кабинета пользователя, валидации форм, авторизации пользователей и ограничения возможностей для
  неавторизованных пользователей;
- логики обработки и удаления изображений аватаров и рецептов, загруженных пользователями;
- кастомной обработки ошибок 404, 500 и др;
- автоматического создания профилей пользователей при регистрации на сайте, а также их каскадное удаление;
- автоматического удаления старых фотографий рецептов, загруженных пользователем, при удалении профиля пользователя
  либо при изменении рецепта;
- логирования проекта: после запуска проекта в корневой директории появится файл логов
  "recipe_website.log" (с настройками логирования ознакомьтесь в файле settings.py проекта);
- тестирования проекта: ко всем приложениям проекта добавлены unit-тесты (usersapp/tests/, webapp/tests/).

## Доступные методы

Проект включает следующие доступные методы:
- регистрация пользователей;
- CRUD-методы с данными пользователя через личный кабинет;
- отображение списка объектов моделей опубликованных рецептов всех пользователей с сортировкой по дате публикации;
- отображение списка объектов моделей опубликованных рецептов конкретного пользователя с сортировкой по дате публикации;
- отображение списка объектов моделей опубликованных рецептов конкретной категории;
- отображение детальной информации об объекте модели рецепта;
- создание нового объекта модели рецепта (доступно только для авторизованного пользователя);
- обновление объекта модели рецепта (доступно только для пользователя, который создал данный рецепт);
- удаление объекта модели рецепта (доступно только для пользователя, который создал данный рецепт);
- и др.

Дополнительно реализованы методы FastAPI:
- получение рецепта по названию;
- получение всех рецептов, в которых есть переданный ингредиент;
- получение всех рецептов указанной категории.

## Локальное развертывание и запуск

Для разворачивания проекта локально необходимо выполнить следующие шаги:
1. Создайте и активируйте виртуальное окружение, установите Python и Poetry, если они еще не установлены:
   ```bash
   pip install poetry
   ```

2. Клонируйте репозиторий "recipe_website":
   ```bash
   git clone https://github.com/yourusername/recipe_website.git
   cd recipe_website
   ```

3. Создайте виртуальное окружение и установите зависимости:
   ```bash
   poetry install
   ```

4. Примените миграции:
   ```bash
   python manage.py migrate
   ```

5. Запустите приложение:
   ```bash
   python manage.py runserver
   ```

6. Для доступа в админку проекта (по маршруту /admin) создайте суперпользователя:
   ```bash
   python manage.py createsuperuser
   ```

7. Не забудьте добавить категории рецептов через админку проекта.

## Развертывание на сервере

Перед развертыванием в продакшене убедитесь, что настройки базы данных и другие конфигурации соответствуют
требованиям вашей среды (в том числе переменные окружения, пример которых описан в файле ".env.deploy").

Развёртывание проекта на сервере включает следующие шаги:
1. Подготовка сервера:
    - Установите необходимые зависимости на сервере, такие как Python, база данных (если используется), веб-сервер
      (например, Nginx или Apache).
    - Установите менеджер виртуальных окружений, такой как virtualenv, для изоляции зависимостей проекта.

2. Копирование проекта на сервер:
    - Скопируйте ваш проект на сервер. Это можно сделать с использованием scp или rsync, либо используя систему
      контроля версий.

3. Настройка виртуального окружения:
    - Создайте и активируйте виртуальное окружение, установите зависимости poetry:
      ```bash
      pip install poetry
      ```

4. Настройка базы данных:
    - Примените миграции:
      ```bash
      python manage.py migrate.
      ```

5. Настройка статических файлов и медиафайлов:
    - Соберите статические файлы:
      ```bash
      python manage.py collectstatic.
      ```
    - Проверьте, что веб-сервер имеет доступ к директории, содержащей статические файлы и медиафайлы.

6. Настройка веб-сервера:
    - Настройте веб-сервер для обслуживания приложения.
    - Запустите Gunicorn.

7. Настройка домена и SSL (по желанию):
    - Настройте ваш домен на сервере.
    - Если требуется, настройте SSL-сертификат для обеспечения безопасного соединения.

8. Управление процессами:
    - Рассмотрите использование инструментов для управления процессами, таких как Supervisor или systemd.

9. Логирование и отладка (по желанию):
    - Настройте систему логирования, чтобы отслеживать ошибки и проблемы.
    - В продакшене отключите отладочный режим в настройках Django.

10. Обновление и поддержка:
    - Регулярно обновляйте зависимости и систему безопасности.
    - Резервируйте базу данных и файлы.
    - Не забывайте применять все необходимые настройки безопасности и следовать bew practices для защиты вашего
      сервера и приложения.

## Зависимости проекта

Проект использует следующие зависимости:
- python = "^3.11"
- django = "^4.2.7"
- python-dotenv = "^1.0.0"
- psycopg2-binary = "^2.9.9"
- pillow = "^10.1.0"
- django-widget-tweaks = "^1.5.0"
- django-bootstrap4 = "^23.2"
- django-crispy-forms = "^2.1"
- crispy-bootstrap4 = "^2023.1"
- django-appconf = "^1.0.6"
- django-imagekit = "^4.0.2"
- pilkit = "^3.0"
- fastapi = "^0.105.0"
- uvicorn = "^0.25.0"
- sqlalchemy = "^2.0.23"

## Завершение

Проект "recipe_website" предоставляет удобный способ управления информацией о рецептах как через админпанель, так и
через личный кабинет на сайте. Он включает в себя авторизацию и регистрацию пользователей для обеспечения
безопасности данных, а также CRUD-методы по созданию, редактированию, обновлению и удалению постов с рецептами. 